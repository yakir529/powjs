var $pow;window.Promise&&void 0!==window.Promise||function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n():"function"==typeof define&&define.amd?define(n):n()}(0,function(){"use strict";function t(n){var e=this.constructor;return this.then(function(t){return e.resolve(n()).then(function(){return t})},function(t){return e.resolve(n()).then(function(){return e.reject(t)})})}function o(){}function i(t){if(!(this instanceof i))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],s(t,this)}function r(e,o){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,i._immediateFn(function(){var t=1===e._state?o.onFulfilled:o.onRejected;if(null!==t){var n;try{n=t(e._value)}catch(t){return void u(o.promise,t)}f(o.promise,n)}else(1===e._state?f:u)(o.promise,e._value)})):e._deferreds.push(o)}function f(n,t){try{if(t===n)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var e=t.then;if(t instanceof i)return n._state=3,n._value=t,void c(n);if("function"==typeof e)return void s((o=e,r=t,function(){o.apply(r,arguments)}),n)}n._state=1,n._value=t,c(n)}catch(t){u(n,t)}var o,r}function u(t,n){t._state=2,t._value=n,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&i._immediateFn(function(){t._handled||i._unhandledRejectionFn(t._value)});for(var n=0,e=t._deferreds.length;n<e;n++)r(t,t._deferreds[n]);t._deferreds=null}function s(t,n){var e=!1;try{t(function(t){e||(e=!0,f(n,t))},function(t){e||(e=!0,u(n,t))})}catch(t){if(e)return;e=!0,u(n,t)}}var n=setTimeout;i.prototype.catch=function(t){return this.then(null,t)},i.prototype.then=function(t,n){var e=new this.constructor(o);return r(this,new function(t,n,e){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof n?n:null,this.promise=e}(t,n,e)),e},i.prototype.finally=t,i.all=function(n){return new i(function(o,r){function i(n,t){try{if(t&&("object"==typeof t||"function"==typeof t)){var e=t.then;if("function"==typeof e)return void e.call(t,function(t){i(n,t)},r)}f[n]=t,0==--u&&o(f)}catch(t){r(t)}}if(!n||void 0===n.length)throw new TypeError("Promise.all accepts an array");var f=Array.prototype.slice.call(n);if(0===f.length)return o([]);for(var u=f.length,t=0;f.length>t;t++)i(t,f[t])})},i.resolve=function(n){return n&&"object"==typeof n&&n.constructor===i?n:new i(function(t){t(n)})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(r){return new i(function(t,n){for(var e=0,o=r.length;e<o;e++)r[e].then(t,n)})},i._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){n(t,0)},i._unhandledRejectionFn=function(t){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var e=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("unable to locate global object")}();"Promise"in e?e.Promise.prototype.finally||(e.Promise.prototype.finally=t):e.Promise=i}),String.prototype.Format||(String.prototype.Format=function(){var t=this.toString();if(!arguments.length)return t;var e=typeof arguments[0];return e="string"===e||"number"===e?arguments:arguments[0],t.replace(/\{([0-9]+)\}/g,function(t,n){return e[n]})}),String.prototype.ToBoolean||(String.prototype.ToBoolean=function(){return"true"===this.toLowerCase()}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,n){"use strict";if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),o=1;o<arguments.length;o++){var r=arguments[o];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},writable:!0,configurable:!0}),Object.getOwnPropertyDescriptors||(Object.getOwnPropertyDescriptors=function(t){var n={};for(var e in t)t.hasOwnProperty(e)&&(n[e]=Object.getOwnPropertyDescriptor(t,e));return n}),($pow=$pow||{}).Components=$pow.Components||{},$pow.Components.http=function(){var t=function(){function t(){}function r(t,n,e,o){return!(!n||"string"!=typeof n||o&&(!o||"function"!=typeof o))}return t.prototype.Post=function(t,n,e){if(r("post",t,n,e)){var o=new XMLHttpRequest;o.open("POST",t),o.onload=function(){200===o.status&&e(o.responseText)},n?o.send(encodeURI(n)):o.send()}},t.prototype.Get=function(t,n){if(r("get",t,null,n)){var e=new XMLHttpRequest;e.open("GET",t),e.onload=function(){200===e.status&&n(e.responseText)},e.send(encodeURI(t))}},t}();return{GetInstance:function(){return new t}}}(),($pow=$pow||{}).Store=function(){var t,n=function(){var e={};function t(){var t,n;this.Components=(n=function(){var n={};function t(){n=$pow.Components}return t.prototype.GetInstanceOf=function(t){return n[t].GetInstance()},t.prototype.IsExists=function(t){return!!n[t]},t}(),t||(t=new n),t)}return t.prototype.Add=function(t,n){e[t]=n},t.prototype.Get=function(t){return e[t]},t.prototype.IsExists=function(t){return!(!e[t]&&!this.Components.IsExists(t))},t}();return t||(t=new n),t}(),$pow.ComponentsFactory=function(){var t,n=function(){function t(){}return t.prototype.Create=function(t){if(void 0!==(n=t)&&n&&n.length&&(e=n,$pow.Store.IsExists(e)))return $pow.Store.Components.GetInstanceOf(t);var n,e},t}();return t||(t=new n),t}(),$pow.ControllersFactory=function(){var t,n=function(o){function t(){}return t.prototype.Create=function(t){if(void 0!==(e=t)&&e&&void 0!==e.Methods&&"string"==typeof e.Identifier){var n=o(t);$pow.Store.Add(t.Identifier,n)}var e},t}(function(t){return new e(t)}),e=function(t){this.Methods=t.Methods,this.Identifier=t.Identifier,this.UsingService=function(t){var n={};if(t){var e={};for(var o in t)(e=$pow.Store.Get(t[o]))?n[t[o]]=e:console.warn("bad service: "+t[o])}return n}(t.UsingService)};return t||(t=new n),t}(),$pow.ViewsFactory=function(){var t,n=function(e){function t(){}return t.prototype.Create=function(t){if(function(t){var n=!0;if(void 0!==t&&t&&t.Controller&&t.Actions){var e=Object.getOwnPropertyNames(t.Actions);for(var o in e)if(!(t.Actions[e[o]].hasOwnProperty("Event")&&t.Actions[e[o]].hasOwnProperty("AttachTo")&&t.Actions[e[o]].hasOwnProperty("Selector")&&t.Actions[e[o]].hasOwnProperty("Delegate"))){n=!1;break}}return n}(t)){var n=e(t);return $pow.Store.Add(t.Identifier,n),n}},t}(function(t){return new e(t)}),e=function(){var e={};function t(t){var n;this.m_definitions=t,n=this.m_definitions.Controller,e[n]=$pow.Store.Get(n),r(o(this.m_definitions.Controller),this.m_definitions.Actions)}function o(t){return e[t]}function r(t,n){var e=Object.getOwnPropertyNames(n),o=Object.getOwnPropertyNames(t.UsingService),r={};n.Controller=t;for(var i=0;i<o.length;i++)r[o[i]]=t.UsingService[o[i]].Methods;for(i=0;i<e.length;i++){var f=n[e[i]];document.addEventListener&&f.AttachTo.addEventListener(f.Event,function(t){t.target===document.querySelector(f.Selector)&&n.Controller.Methods[f.Delegate].apply(t.target,[t,r,f.Invoke])},f.Bubble||!1)}}return t.prototype.ListenTo=function(t,n){var e=o(n);r(e||o(this.m_definitions.Controller),t)},t}();return t||(t=new n),t}(),$pow.ServicesFactory=function(){var t,n=function(o){function t(){}return t.prototype.Create=function(t){if(void 0!==(e=t)&&e&&void 0!==e.Methods&&"string"==typeof e.Identifier){var n=o(t);return $pow.Store.Add(t.Identifier,n),n}var e},t}(function(t){return new e(t)}),e=function(t){this.Methods={},this.Identifier=t.Identifier,this.UsingComponent=function(t){var n={};if(t){var e={};for(var o in t)(e=$pow.ComponentsFactory.Create(t[o]))?n[t[o]]=e:console.warn("bad component: "+t[o])}return n}(t.UsingComponent),Object.assign(this.Methods,t.Methods,{UsingComponent:this.UsingComponent})};return t||(t=new n),t}();